<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Aplicaciones</title>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
        <h:outputStylesheet library="css" name="main.css"  />
        <h:outputScript library="primefaces" name="jquery/jquery.js" /> 
        <h:outputScript library="js" name="PrimefacesCalendarTranslationES.js" /> 
    </h:head>
    <h:body>
        <p:layout fullPage="true" >
            <p:layoutUnit position="north" size="70" >                
            <ui:insert name="headerPart" >                                       
                    <h:panelGrid columns="3" style="margin: 0px auto; border-style:none; width: 100%" >                          
						<h:panelGrid columns="2">
							<h:graphicImage style="bottom: 0" library="images" name="normal.jpg" width="60" height="40" title="Empresa"/>
							<p:megaMenu orientation="horizontal" style="margin-top:5px" rendered="#{not empty request.remoteUser}">
						  		<p:menuitem value="inicio"  url="/private/index.xhtml" icon="pi pi-home" />
							</p:megaMenu>							 
						</h:panelGrid>
						
                        <h:panelGrid style="width: 100%; float: left" rendered="#{not empty request.remoteUser}">
                        <h:form>
                        	<p:menuButton style="float: right" value="#{homeController.userName}">
        						<p:menuitem value="Perfil" url="/public/UsuarioInfo.xhtml?action=update" icon="pi pi-user-edit"/>
						        <p:separator />
						        <p:menuitem value="Salir" onclick="logout()" url="#" icon="pi pi-sign-out"/>						        
						    </p:menuButton>
                            
                        </h:form>     
                        </h:panelGrid>  
                    </h:panelGrid>   
                    <div id="logout"></div>
                    <script type="text/javascript">
                    function logout( ) {
	                    var div = document.getElementById('logout');
	                    var form = document.createElement('form');
	                    form.setAttribute('action', '${request.contextPath}/logout');
	                    form.setAttribute('method', 'POST');
	                    var submit = document.createElement('input');
	                    submit.setAttribute('type', 'submit');
	                    submit.setAttribute("value", "Save");
	                    submit.setAttribute('id', 'savebutton');
	                    form.appendChild(submit);
	                    div.appendChild(form);
	                    submit.click();
                    }
 					</script>	                    
                </ui:insert>
            </p:layoutUnit>

            <p:layoutUnit position="center" >
                <ui:insert name="contentPart"/>
            </p:layoutUnit>

            <p:layoutUnit position="south" size="50" >
                <ui:insert name="footerPArt">
                    <div style="text-align: right; font-size: 8pt">
                        <h:graphicImage library="images" name="redlogo.png" width="90" height="32" title="Red Cricket"/>
                    </div>
                </ui:insert>
            </p:layoutUnit>
        </p:layout>
    </h:body>
</html>

